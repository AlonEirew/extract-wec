# Extract WEC Dataset
Extract mentions from Wikipedia links to create a cross document coreference database. <br/>
This method follow the research paper: (TBD - ADD PAPER LINK)

### Project Output
* An SQLite dataset containing the crud extraction of coreference relations from Wikipedia (this resource can be used for experiments when generating the final version of WEC-Lang)
* A JSON format resource on the WEC-Lang dataset

### Requisites
* Creating a Wikipedia ElasticSearch Index using <a href="https://github.com/AlonEirew/wikipedia-to-elastic">wikipedia-to-elastic</a> project
* Java 11
* A relational Database like SQLite / SQLServer (default is set to SQLite)

In order to WEC in current supported languages (e.g., English, French, Spanish, German, Chinese), follow the steps needed in *wikipedia-to-elastic* and below in .

### Building the project:
From extract-wec root folder do the following:
- `#>./gradlew clean build -x test`
- `#>cd build/distribution`
- Extract the zip file (extract-wec.zip) and cd into created `extract-wec` folder


### Configuration:
Configuration file `conf.json` can be found in project root
```
"poolSize": "8" => Number of thread to run
"elasticHost": "localhost" => Elastic engine host
"elasticPort": 9200 => (Elastic engine port)
"elasticWikiIndex": "enwiki_v3" => (Elastic index to read from (as generated by *wikipedia-to-elastic*)
"elasticWikinewsIndex": "wikinews_v1" => (Ignore)
"infoboxConfiguration": "/infobox_config/en_infobox_config.json" => Explained below
"multiRequestInterval" : 100 (recommended value) => Control the number of search pages to retrive from elastic
"elasticSearchInterval" : 100 (recommended value) => Control the number of pages to read by the elasitc scroller
"totalAmountToExtract" : -1 => if < 0 then read all pages, otherwise will upto the amount specified
"sqlConnectionUrl": "jdbc:sqlite:/Users/aeirew/workspace/DataBase/WikiLinksExperiment.db" => Location where to generate the sql dataset
```

#### Infobox Configuration:
We have extracted the relevant infobox configuration to the English Wikipedia. In order to create a newer version of WEC-Eng, use the default `/infobox_config/en_infobox_config.json` in configuration. <br/><br/>
To generate WEC in one of the supported languages (other than English) follow those steps:
* Make sure the Wikipedia Elastic engine is running
*  


### Running process for generating the SQL Dataset:
Make sure the Wikipedia Elastic engine is running
`#>./bin/extract-wec`


Running events:
`java -Xmx90000m -DentityExpansionLimit=2147480000 -DtotalEntitySizeLimit=2147480000 -Djdk.xml.totalEntitySizeLimit=2147480000 -cp "lib/*" experimentscripts.event.ReadFilteredJsonAndProcess`
